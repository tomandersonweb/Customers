!function(){angular.module("app").component("customerDetailComponent",{templateUrl:"/app/components/customerDetail.component.html",controllerAs:"model",bindings:{cId:"<"},controller:["customersService","toastr","$state","$filter",function(t,e,o,n){var r=this;r.customer={},r.action="Edit",r.colours=[{id:1,name:"Red"},{id:2,name:"Green"},{id:3,name:"Blue"}],r.$onInit=function(){t.getCustomer(r.cId).then(function(t){r.customer=t,r.customer.dateActive=new Date(r.customer.dateActive),r.red=1===n("filter")(r.customer.favouriteColours,{name:"Red"}).length,r.blue=1===n("filter")(r.customer.favouriteColours,{name:"Blue"}).length,r.green=1===n("filter")(r.customer.favouriteColours,{name:"Green"}).length}).catch(function(t){e.error(t)})},r.save=function(){r.customer.favouriteColours=[],!0===r.red&&r.customer.favouriteColours.push({id:1,name:"Red"}),!0===r.green&&r.customer.favouriteColours.push({id:2,name:"Green"}),!0===r.blue&&r.customer.favouriteColours.push({id:3,name:"Blue"}),t.editCustomer(r.customer.id,r.customer).then(function(t){e.success("Customer updated"),o.go("customers")}).catch(function(t){e.error(t)})}}]})}(),function(){angular.module("app").component("customerInsertComponent",{templateUrl:"/app/components/customerDetail.component.html",controllerAs:"model",controller:["customersService","toastr","$state",function(t,e,o){var n=this;n.customer={},n.action="Insert",n.red=!1,n.green=!1,n.blue=!1,n.$onInit=function(){},n.save=function(){n.customer.favouriteColours=[],!0===n.red&&n.customer.favouriteColours.push({id:1,name:"Red"}),!0===n.green&&n.customer.favouriteColours.push({id:2,name:"Green"}),!0===n.blue&&n.customer.favouriteColours.push({id:3,name:"Blue"}),t.addCustomer(n.customer).then(function(t){e.success("Customer added"),o.go("customers")}).catch(function(t){e.error(t)})}}]})}(),function(){angular.module("app").component("customersComponent",{templateUrl:"/app/components/customers.component.html",controllerAs:"model",controller:["customersService","toastr",function(t,e){var o=this;o.customers=[],o.$onInit=function(){o.setup()},o.setup=function(){o.listCustomers()},o.listCustomers=function(){t.getCustomers().then(function(t){o.customers=t}).catch(function(t){e.danger(t)})},o.addCustomer=function(n){t.addCustomer(n).then(function(t){o.setup()}).catch(function(t){e.danger(t)})},o.saveCustomer=function(){t.editCustomer(o.editCustomer).then(function(t){o.setup()}).catch(function(t){e.danger(t)})},o.showAddCustomer=function(){},o.showEditCustomer=function(t){o.editCustomer=t}}]})}(),angular.module("app").factory("customersService",["$http","$q",function(t,e){return{getCustomers:function(){return t.get(config.baseUri+"customers").then(function(t){return t.data}).catch(function(t){return e.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})},getCustomer:function(o){return t.get(config.baseUri+"customers/"+o).then(function(t){return t.data}).catch(function(t){return e.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})},addCustomer:function(o){return t.post(config.baseUri+"customers/",o).then(function(t){return t.data}).catch(function(t){return e.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})},editCustomer:function(o,n){return t.put(config.baseUri+"customers/"+o,n).then(function(t){return t.data}).catch(function(t){return e.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})}}}]);